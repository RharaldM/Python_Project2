/* Definições de variáveis CSS globais (modo claro por padrão) */
:root {
    /* Cores primárias para o tema - Nomes personalizados */
    --meu-background-color: #f8f9fa; /* Bootstrap $body-bg-light */
    --meu-text-color: #212529;       /* Bootstrap $body-color-light */
    --meu-input-placeholder-color: #6c757d;
    --meu-link-color: #0d6efd;
    --meu-link-hover-color: #0a58ca;
    --meu-border-color: #dee2e6;
    --meu-card-bg-color: #ffffff;
    --meu-card-header-bg-color: #e9ecef; /* Um cinza claro para cabeçalhos de card no modo claro */
    --meu-card-header-text-color: #212529;
    --meu-nav-link-color: rgba(0,0,0,.55);
    --meu-nav-link-hover-color: rgba(0,0,0,.7);
    --meu-heading-color: #212529;
    --meu-footer-bg-color: #343a40; /* Cor de fundo padrão para .bg-dark do Bootstrap */
    --meu-footer-text-color: #f8f9fa;

    /* Para o foco dos inputs */
    --meu-link-color-rgb: 13, 110, 253; /* RGB de #0d6efd */

    /* Cores dos gráficos (Modo Claro) - Usadas pelo script do dashboard.html */
    --chart-bg-color-1-light: #28a745;
    --chart-bg-color-2-light: #ffc107;
    --chart-bg-color-3-light: #17a2b8;
    --chart-bg-color-4-light: #adb5bd;
    --chart-bg-color-5-light: #dc3545;
    --chart-bg-color-6-light: #f8f9fa; /* Pode ser usado para bordas ou fundos neutros */
    --chart-font-color-light: #212529;
    --chart-grid-color-light: #dee2e6;
}

/* Sobrescreve variáveis para o modo escuro */
[data-bs-theme="dark"] {
    --meu-background-color: #212529; /* Bootstrap $body-bg-dark */
    --meu-text-color: #f8f9fa;       /* Bootstrap $body-color-dark */
    --meu-input-placeholder-color: #adb5bd;
    --meu-link-color: #6ea8fe; 
    --meu-link-hover-color: #8bb9fe;
    --meu-border-color: #495057;
    --meu-card-bg-color: #2b3035; 
    --meu-card-header-bg-color: #343a40; 
    --meu-card-header-text-color: #f8f9fa;
    --meu-nav-link-color: rgba(255,255,255,.55);
    --meu-nav-link-hover-color: rgba(255,255,255,.75);
    --meu-heading-color: #f8f9fa;
    --meu-footer-bg-color: #1a1d20; /* Cor mais escura para footer no dark mode */
    --meu-footer-text-color: #cccccc;

    --meu-link-color-rgb: 110, 168, 254; /* RGB de #6ea8fe */

    /* Cores dos gráficos (Modo Escuro) - Usadas pelo script do dashboard.html */
    --chart-bg-color-1-dark: #198754;
    --chart-bg-color-2-dark: #ffc107; /* Amarelo pode precisar de ajuste de contraste em alguns fundos escuros */
    --chart-bg-color-3-dark: #0dcaf0;
    --chart-bg-color-4-dark: #6c757d;
    --chart-bg-color-5-dark: #dc3545;
    --chart-bg-color-6-dark: #212529; /* Pode ser usado para bordas ou fundos neutros */
    --chart-font-color-dark: #f8f9fa;
    --chart-grid-color-dark: #343a40;
}

/* Aplicações das variáveis */
body {
    background-color: var(--meu-background-color);
    color: var(--meu-text-color);
    transition: background-color 0.3s ease, color 0.3s ease;
}

h1, h2, h3, h4, h5, h6 {
    color: var(--meu-heading-color);
    transition: color 0.3s ease;
}

/* Links genéricos (não botões, não nav-links, etc.) */
a:not(.btn):not(.nav-link):not(.dropdown-item):not(.page-link):not(.navbar-brand) {
    color: var(--meu-link-color);
    text-decoration: none; /* Bootstrap já remove por padrão, mas para garantir */
    transition: color 0.3s ease;
}
a:not(.btn):not(.nav-link):not(.dropdown-item):not(.page-link):not(.navbar-brand):hover {
    color: var(--meu-link-hover-color);
    /* text-decoration: underline; Bootstrap pode adicionar isso */
}

label {
    color: var(--meu-text-color);
    transition: color 0.3s ease;
}

/* Bootstrap 5.3+ lida bem com forms usando data-bs-theme.
   Estas são sobrescrições se você quiser forçar suas variáveis. */
.form-control,
.form-select {
    background-color: var(--meu-background-color);
    color: var(--meu-text-color);
    border-color: var(--meu-border-color);
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}
.form-control::placeholder { color: var(--meu-input-placeholder-color); opacity: 1; }

[data-bs-theme="dark"] .form-select {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23f8f9fa' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");
}

.form-control:focus,
.form-select:focus {
    border-color: var(--meu-link-color); /* Ou uma cor de foco específica do Bootstrap como var(--bs-primary) */
    box-shadow: 0 0 0 0.25rem rgba(var(--meu-link-color-rgb), 0.25);
}

/* Navbar:
   Seu base.html usa <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
   As classes navbar-dark e bg-dark FORÇAM um tema escuro específico para a navbar,
   INDEPENDENTEMENTE do data-bs-theme do body.
   Para uma navbar que se adapta ao tema do body, remova navbar-dark e bg-dark do HTML
   e deixe o Bootstrap estilizá-la com base no data-bs-theme, ou adicione estilos aqui:
*/
/* Exemplo para navbar adaptável (remova navbar-dark e bg-dark do HTML da navbar):
.navbar {
    background-color: var(--meu-card-header-bg-color); // Ou var(--bs-tertiary-bg) do Bootstrap
}
.navbar .navbar-brand,
.navbar .nav-link {
    color: var(--meu-nav-link-color);
}
.navbar .nav-link:hover,
.navbar .nav-link.active,
.navbar .navbar-brand:hover {
    color: var(--meu-nav-link-hover-color);
}
.navbar-toggler {
    border-color: rgba(var(--meu-text-color-rgb, 255,255,255), 0.1); // Precisa de --meu-text-color-rgb
}
.navbar-toggler-icon {
    // Para adaptar o ícone do toggler, você pode precisar de um SVG com 'fill' currentColor
    // ou duas versões do ícone e mostrar/esconder com CSS.
    // Bootstrap 5.3 tenta fazer isso automaticamente.
}
*/

/* Botão flutuante de tema (estilos inline no base.html têm alta especificidade) */
/* As variáveis --bs-body-bg e --bs-body-color usadas no style inline do base.html
   são variáveis do Bootstrap e devem se adaptar automaticamente com data-bs-theme.
   Se quiser usar suas variáveis:
#toggle-dark-mode {
    background: var(--meu-card-bg-color) !important;
    color: var(--meu-text-color) !important;
    border: 1.5px solid var(--meu-border-color) !important;
}
*/

/* Cards */
.card {
    background-color: var(--meu-card-bg-color);
    /* color: var(--meu-text-color); Bootstrap lida com isso */
    border-color: var(--meu-border-color);
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}
/* Card Header: Seu HTML usa classes como bg-primary, bg-secondary, etc.
   Essas classes do Bootstrap têm cores fixas.
   Se quiser que sigam o tema personalizado:
.card-header {
    background-color: var(--meu-card-header-bg-color);
    color: var(--meu-card-header-text-color);
    border-bottom-color: var(--meu-border-color);
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}
*/
.card-title, .card-text { /* Para texto dentro de .card-body */
    color: var(--meu-text-color); /* Garante que o texto herde corretamente */
}


/* Estilos para category-tag (cor fixa, independente do tema claro/escuro) */
.category-tag {
    display: inline-flex;       /* Alinha o texto da categoria e o botão de fechar na mesma linha e permite alinhamento vertical */
    align-items: center;        /* Centraliza verticalmente o texto e o botão */
    padding: 0.30em 0.4em 0.30em 0.75em; /* Espaçamento interno: Topo Direita(menor) Abaixo Esquerda(maior) */
                                /* O padding direito é menor porque o botão de fechar já tem seu próprio padding/margem */
    background-color: #17a2b8;  /* Cor de fundo da tag (um azul-petróleo/ciano, como Bootstrap 'info') */
    color: white;               /* Cor do texto da categoria */
    border-radius: 0.25rem;     /* Bordas arredondadas, padrão Bootstrap */
    font-size: 0.875em;         /* Tamanho da fonte um pouco menor para a tag */
    line-height: 1.2;           /* Altura da linha para acomodar o botão de fechar sem aumentar demais a tag */
    /* As margens (margin-right, margin-bottom) são desnecessárias se o container usa "gap", como é o caso em add_task.html */
    transition: none;           /* Mantido do código original */
}

.category-tag .btn-close {
    /* O filtro abaixo torna o ícone 'X' (que é preto por padrão no SVG do Bootstrap) em branco */
    filter: brightness(0) invert(1); /* Mantido do código original */
    
    margin-left: 0.5em;         /* Espaço entre o texto da categoria e o botão 'X' */
    
    /* Ajustes de tamanho e opacidade para o botão 'X' dentro da tag.
       Bootstrap já define width/height como 1em do font-size do botão.
       Se o 'X' parecer muito pequeno/grande, ajuste o font-size aqui: */
    font-size: 0.8em;           /* Faz o 'X' ser 0.8em do font-size do .category-tag (0.8 * 0.875em do normal) */

    opacity: 0.65;              /* Opacidade padrão do botão 'X', um pouco mais visível que o padrão Bootstrap (0.5) */
    outline: none;              /* Remove qualquer outline padrão que possa aparecer */
    box-shadow: none;           /* Remove qualquer box-shadow padrão */
    
    /* Importante: Garante que o botão não tenha um fundo que possa esconder o 'X' (que é um background-image SVG) */
    background-color: transparent !important; 
}

.category-tag .btn-close:hover {
    opacity: 1;                 /* Opacidade total ao passar o mouse */
}

/* Para garantir que o foco no btn-close dentro da tag não adicione uma sombra que pareça estranha no contexto da tag */
.category-tag .btn-close:focus {
    outline: none;
    box-shadow: none; /* Remove o box-shadow de foco padrão do Bootstrap se não desejar */
    /* Se quiser um feedback de foco, pode ser um brilho sutil ou opacidade total: */
    /* opacity: 1; */ 
}
.custom-tab-completed { /* Modo claro */
    background-color: #dc3545; color: #ffffff; /* ... */
}
[data-bs-theme="dark"] .custom-tab-completed { /* Modo escuro */
    background-color: #c82333; color: #ffffff; /* ... */
}
/* Repetir para .custom-tab-pending e .custom-tab-all */
.custom-tab-pending { background-color: #ffc107; color: #212529; /* ... */ }
[data-bs-theme="dark"] .custom-tab-pending { background-color: #d39e00; color: #212529; /* ... */ }

.custom-tab-all { background-color: #0d6efd; color: #ffffff; /* ... */ }
[data-bs-theme="dark"] .custom-tab-all { background-color: #0a58ca; color: #ffffff; /* ... */ }


/* Footer: seu base.html usa <footer class="bg-dark text-white ...">
   As classes bg-dark e text-white FORÇAM um tema escuro específico para o footer.
   Para que ele use suas variáveis --meu-footer-*:
   1. Remova bg-dark e text-white do HTML do footer.
   2. Aplique os estilos no CSS:
footer {
    background-color: var(--meu-footer-bg-color);
    color: var(--meu-footer-text-color);
    text-align: center;
    padding: 1rem 0; // Exemplo de padding, ajuste conforme Bootstrap py-3
    margin-top: 1.5rem; // Exemplo de margin, ajuste conforme Bootstrap mt-4
}
*/
